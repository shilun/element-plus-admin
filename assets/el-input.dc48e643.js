import{H as e,bu as a,W as t,r as o,aJ as n,E as l,aC as s,F as i,O as r,be as u,ao as p,d,aq as c,b4 as v,V as f,ar as m,S as y,a_ as x,bm as b,bv as g,bw as h,aW as w,v as S,N as k,aD as z,C as $,J as C,aG as I,aZ as E,o as F,c as P,Z as V,a0 as _,n as j,a as B,z as M,e as N,h as A,w as O,$ as R,Q as H,Y as W,g as T,aB as K,av as L,an as Z,t as D,a1 as J,_ as q,am as G,ap as Q,a2 as U}from"./index.4aa55768.js";import{U as Y}from"./event.dc71bbc2.js";import{u as X,a as ee}from"./index.13a1e699.js";import{i as ae}from"./el-popper.108b1588.js";const te=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),oe=["class","style"],ne=/^on[A-Z]/,le=(o={})=>{const{excludeListeners:n=!1,excludeKeys:l}=o,s=e((()=>((null==l?void 0:l.value)||[]).concat(oe))),i=t();return e(i?()=>{var e;return a(Object.entries(null==(e=i.proxy)?void 0:e.$attrs).filter((([e])=>!(s.value.includes(e)||n&&ne.test(e)))))}:()=>({}))};let se;const ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function re(e,a=1,t){var o;se||(se=document.createElement("textarea"),document.body.appendChild(se));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),n=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ie.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:t}}(e);se.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),se.value=e.value||e.placeholder||"";let u=se.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),se.value="";const d=se.scrollHeight-l;if(n(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(n(t)){let e=d*t;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(o=se.parentNode)||o.removeChild(se),se=void 0,p}const ue=l({id:{type:String,default:void 0},size:s,disabled:Boolean,modelValue:{type:i([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:i([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:r},prefixIcon:{type:r},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:i([Object,Array,String]),default:()=>u({})}}),pe={[Y]:e=>p(e),input:e=>p(e),change:e=>p(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},de=["role"],ce=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],ve=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],fe=d({name:"ElInput",inheritAttrs:!1});const me=U(q(d({...fe,props:ue,emits:pe,setup(a,{expose:t,emit:n}){const l=a,s=c(),i=v(),r=e((()=>{const e={};return"combobox"===l.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),u=le({excludeKeys:e((()=>Object.keys(r.value)))}),{form:p,formItem:d}=X(),{inputId:q}=ee(l,{formItemContext:d}),U=f(),oe=m(),ne=y("input"),se=y("textarea"),ie=x(),ue=x(),pe=o(!1),fe=o(!1),me=o(!1),ye=o(!1),xe=o(),be=x(l.inputStyle),ge=e((()=>ie.value||ue.value)),he=e((()=>{var e;return null!=(e=null==p?void 0:p.statusIcon)&&e})),we=e((()=>(null==d?void 0:d.validateState)||"")),Se=e((()=>we.value&&b[we.value])),ke=e((()=>ye.value?g:h)),ze=e((()=>[s.style,l.inputStyle])),$e=e((()=>[l.inputStyle,be.value,{resize:l.resize}])),Ce=e((()=>ae(l.modelValue)?"":String(l.modelValue))),Ie=e((()=>l.clearable&&!oe.value&&!l.readonly&&!!Ce.value&&(pe.value||fe.value))),Ee=e((()=>l.showPassword&&!oe.value&&!l.readonly&&!!Ce.value&&(!!Ce.value||pe.value))),Fe=e((()=>l.showWordLimit&&!!u.value.maxlength&&("text"===l.type||"textarea"===l.type)&&!oe.value&&!l.readonly&&!l.showPassword)),Pe=e((()=>Array.from(Ce.value).length)),Ve=e((()=>!!Fe.value&&Pe.value>Number(u.value.maxlength))),_e=e((()=>!!i.suffix||!!l.suffixIcon||Ie.value||l.showPassword||Fe.value||!!we.value&&he.value)),[je,Be]=function(e){const a=o();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:n}=e.value;if(null==t||null==o)return;const l=n.slice(0,Math.max(0,t)),s=n.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=a.value;if(null==o||null==n||null==l)return;let s=t.length;if(t.endsWith(n))s=t.length-n.length;else if(t.startsWith(o))s=o.length;else{const e=o[l-1],a=t.indexOf(e,l-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(ie);w(ue,(e=>{if(!Fe.value||"both"!==l.resize)return;const a=e[0],{width:t}=a.contentRect;xe.value={right:`calc(100% - ${t+15+6}px)`}}));const Me=()=>{const{type:e,autosize:a}=l;if(G&&"textarea"===e)if(a){const e=Q(a)?a.minRows:void 0,t=Q(a)?a.maxRows:void 0;be.value={...re(ue.value,e,t)}}else be.value={minHeight:re(ue.value).minHeight}},Ne=()=>{const e=ge.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},Ae=async e=>{je();let{value:a}=e.target;l.formatter&&(a=l.parser?l.parser(a):a,a=l.formatter(a)),me.value||(a!==Ce.value?(n(Y,a),n("input",a),await k(),Ne(),Be()):Ne())},Oe=e=>{n("change",e.target.value)},Re=e=>{n("compositionstart",e),me.value=!0},He=e=>{var a;n("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";me.value=!te(o)},We=e=>{n("compositionend",e),me.value&&(me.value=!1,Ae(e))},Te=()=>{ye.value=!ye.value,Ke()},Ke=async()=>{var e;await k(),null==(e=ge.value)||e.focus()},Le=e=>{pe.value=!0,n("focus",e)},Ze=e=>{var a;pe.value=!1,n("blur",e),l.validateEvent&&(null==(a=null==d?void 0:d.validate)||a.call(d,"blur").catch((e=>z())))},De=e=>{fe.value=!1,n("mouseleave",e)},Je=e=>{fe.value=!0,n("mouseenter",e)},qe=e=>{n("keydown",e)},Ge=()=>{n(Y,""),n("change",""),n("clear"),n("input","")};return S((()=>l.modelValue),(()=>{var e;k((()=>Me())),l.validateEvent&&(null==(e=null==d?void 0:d.validate)||e.call(d,"change").catch((e=>z())))})),S(Ce,(()=>Ne())),S((()=>l.type),(async()=>{await k(),Ne(),Me()})),$((()=>{!l.formatter&&l.parser,Ne(),k(Me)})),t({input:ie,textarea:ue,ref:ge,textareaStyle:$e,autosize:C(l,"autosize"),focus:Ke,blur:()=>{var e;return null==(e=ge.value)?void 0:e.blur()},select:()=>{var e;null==(e=ge.value)||e.select()},clear:Ge,resizeTextarea:Me}),(e,a)=>I((F(),P("div",W(B(r),{class:["textarea"===e.type?B(se).b():B(ne).b(),B(ne).m(B(U)),B(ne).is("disabled",B(oe)),B(ne).is("exceed",B(Ve)),{[B(ne).b("group")]:e.$slots.prepend||e.$slots.append,[B(ne).bm("group","append")]:e.$slots.append,[B(ne).bm("group","prepend")]:e.$slots.prepend,[B(ne).m("prefix")]:e.$slots.prefix||e.prefixIcon,[B(ne).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[B(ne).bm("suffix","password-clear")]:B(Ie)&&B(Ee)},e.$attrs.class],style:B(ze),role:e.containerRole,onMouseenter:Je,onMouseleave:De}),[V(" input "),"textarea"!==e.type?(F(),P(_,{key:0},[V(" prepend slot "),e.$slots.prepend?(F(),P("div",{key:0,class:j(B(ne).be("group","prepend"))},[M(e.$slots,"prepend")],2)):V("v-if",!0),N("div",{class:j([B(ne).e("wrapper"),B(ne).is("focus",pe.value)])},[V(" prefix slot "),e.$slots.prefix||e.prefixIcon?(F(),P("span",{key:0,class:j(B(ne).e("prefix"))},[N("span",{class:j(B(ne).e("prefix-inner"))},[M(e.$slots,"prefix"),e.prefixIcon?(F(),A(B(H),{key:0,class:j(B(ne).e("icon"))},{default:O((()=>[(F(),A(R(e.prefixIcon)))])),_:1},8,["class"])):V("v-if",!0)],2)],2)):V("v-if",!0),N("input",W({id:B(q),ref_key:"input",ref:ie,class:B(ne).e("inner")},B(u),{type:e.showPassword?ye.value?"text":"password":e.type,disabled:B(oe),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,form:l.form,onCompositionstart:Re,onCompositionupdate:He,onCompositionend:We,onInput:Ae,onFocus:Le,onBlur:Ze,onChange:Oe,onKeydown:qe}),null,16,ce),V(" suffix slot "),B(_e)?(F(),P("span",{key:1,class:j(B(ne).e("suffix"))},[N("span",{class:j(B(ne).e("suffix-inner"))},[B(Ie)&&B(Ee)&&B(Fe)?V("v-if",!0):(F(),P(_,{key:0},[M(e.$slots,"suffix"),e.suffixIcon?(F(),A(B(H),{key:0,class:j(B(ne).e("icon"))},{default:O((()=>[(F(),A(R(e.suffixIcon)))])),_:1},8,["class"])):V("v-if",!0)],64)),B(Ie)?(F(),A(B(H),{key:1,class:j([B(ne).e("icon"),B(ne).e("clear")]),onMousedown:L(B(Z),["prevent"]),onClick:Ge},{default:O((()=>[T(B(K))])),_:1},8,["class","onMousedown"])):V("v-if",!0),B(Ee)?(F(),A(B(H),{key:2,class:j([B(ne).e("icon"),B(ne).e("password")]),onClick:Te},{default:O((()=>[(F(),A(R(B(ke))))])),_:1},8,["class"])):V("v-if",!0),B(Fe)?(F(),P("span",{key:3,class:j(B(ne).e("count"))},[N("span",{class:j(B(ne).e("count-inner"))},D(B(Pe))+" / "+D(B(u).maxlength),3)],2)):V("v-if",!0),B(we)&&B(Se)&&B(he)?(F(),A(B(H),{key:4,class:j([B(ne).e("icon"),B(ne).e("validateIcon"),B(ne).is("loading","validating"===B(we))])},{default:O((()=>[(F(),A(R(B(Se))))])),_:1},8,["class"])):V("v-if",!0)],2)],2)):V("v-if",!0)],2),V(" append slot "),e.$slots.append?(F(),P("div",{key:1,class:j(B(ne).be("group","append"))},[M(e.$slots,"append")],2)):V("v-if",!0)],64)):(F(),P(_,{key:1},[V(" textarea "),N("textarea",W({id:B(q),ref_key:"textarea",ref:ue,class:B(se).e("inner")},B(u),{tabindex:e.tabindex,disabled:B(oe),readonly:e.readonly,autocomplete:e.autocomplete,style:B($e),"aria-label":e.label,placeholder:e.placeholder,form:l.form,onCompositionstart:Re,onCompositionupdate:He,onCompositionend:We,onInput:Ae,onFocus:Le,onBlur:Ze,onChange:Oe,onKeydown:qe}),null,16,ve),B(Fe)?(F(),P("span",{key:0,style:J(xe.value),class:j(B(ne).e("count"))},D(B(Pe))+" / "+D(B(u).maxlength),7)):V("v-if",!0)],64))],16,de)),[[E,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{me as E,te as i,le as u};

import{aR as e,E as a,aC as t,aJ as l,d as n,S as r,r as u,s,H as i,aI as o,V as d,ar as m,v as c,C as p,bb as b,o as v,c as f,aG as N,a as y,n as I,au as g,g as h,w as x,h as V,R as S,c6 as E,Q as w,Z as A,aH as F,c7 as k,av as _,_ as j,ao as B,aD as C,a2 as K}from"./index.7afd9b66.js";import{E as T}from"./el-input.d94b3c8e.js";import{C as M,I as O,U as z}from"./event.dc71bbc2.js";import{i as P}from"./el-popper.427b6192.js";import{u as $}from"./index.bab1746d.js";import{u as D}from"./index.f681da9c.js";const G=100,H=600,L={beforeMount(a,t){const l=t.value,{interval:n=G,delay:r=H}=e(l)?{}:l;let u,s;const i=()=>e(l)?l():l.handler(),o=()=>{s&&(clearTimeout(s),s=void 0),u&&(clearInterval(u),u=void 0)};a.addEventListener("mousedown",(e=>{0===e.button&&(o(),i(),document.addEventListener("mouseup",(()=>o()),{once:!0}),s=setTimeout((()=>{u=setInterval((()=>{i()}),n)}),r))}))}},R=a({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:t,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>null===e||l(e)||["min","max"].includes(e),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0}}),Y={[M]:(e,a)=>e!==a,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[O]:e=>l(e)||P(e),[z]:e=>l(e)||P(e)},J=["aria-label","onKeydown"],Q=["aria-label","onKeydown"],U=n({name:"ElInputNumber"});const Z=K(j(n({...U,props:R,emits:Y,setup(e,{expose:a,emit:t}){const n=e,{t:j}=$(),K=r("input-number"),G=u(),H=s({currentValue:n.modelValue,userInput:null}),{formItem:R}=D(),Y=i((()=>l(n.modelValue)&&le(n.modelValue,-1)<n.min)),U=i((()=>l(n.modelValue)&&le(n.modelValue)>n.max)),Z=i((()=>{const e=te(n.step);return o(n.precision)?Math.max(te(n.modelValue),e):(n.precision,n.precision)})),q=i((()=>n.controls&&"right"===n.controlsPosition)),W=d(),X=m(),ee=i((()=>{if(null!==H.userInput)return H.userInput;let e=H.currentValue;if(P(e))return"";if(l(e)){if(Number.isNaN(e))return"";o(n.precision)||(e=e.toFixed(n.precision))}return e})),ae=(e,a)=>{if(o(a)&&(a=Z.value),0===a)return Math.round(e);let t=String(e);const l=t.indexOf(".");if(-1===l)return e;if(!t.replace(".","").split("")[l+a])return e;const n=t.length;return"5"===t.charAt(n-1)&&(t=`${t.slice(0,Math.max(0,n-1))}6`),Number.parseFloat(Number(t).toFixed(a))},te=e=>{if(P(e))return 0;const a=e.toString(),t=a.indexOf(".");let l=0;return-1!==t&&(l=a.length-t-1),l},le=(e,a=1)=>l(e)?ae(e+n.step*a):H.currentValue,ne=()=>{if(n.readonly||X.value||U.value)return;const e=Number(ee.value)||0,a=le(e);se(a),t(O,H.currentValue)},re=()=>{if(n.readonly||X.value||Y.value)return;const e=Number(ee.value)||0,a=le(e,-1);se(a),t(O,H.currentValue)},ue=(e,a)=>{const{max:l,min:r,step:u,precision:s,stepStrictly:i,valueOnClear:d}=n;let m=Number(e);if(P(e)||Number.isNaN(m))return null;if(""===e){if(null===d)return null;m=B(d)?{min:r,max:l}[d]:d}return i&&(m=ae(Math.round(m/u)*u,s)),o(s)||(m=ae(m,s)),(m>l||m<r)&&(m=m>l?l:r,a&&t(z,m)),m},se=e=>{var a;const l=H.currentValue,r=ue(e);l!==r&&(H.userInput=null,t(z,r),t(M,r,l),n.validateEvent&&(null==(a=null==R?void 0:R.validate)||a.call(R,"change").catch((e=>C()))),H.currentValue=r)},ie=e=>{H.userInput=e,t(O,""===e?null:Number(e))},oe=e=>{const a=""!==e?Number(e):"";(l(a)&&!Number.isNaN(a)||""===e)&&se(a),H.userInput=null},de=e=>{t("focus",e)},me=e=>{var a;t("blur",e),n.validateEvent&&(null==(a=null==R?void 0:R.validate)||a.call(R,"blur").catch((e=>C())))};return c((()=>n.modelValue),(e=>{H.currentValue=ue(e,!0),H.userInput=null}),{immediate:!0}),p((()=>{var e;const{min:a,max:r,modelValue:u}=n,s=null==(e=G.value)?void 0:e.input;if(s.setAttribute("role","spinbutton"),Number.isFinite(r)?s.setAttribute("aria-valuemax",String(r)):s.removeAttribute("aria-valuemax"),Number.isFinite(a)?s.setAttribute("aria-valuemin",String(a)):s.removeAttribute("aria-valuemin"),s.setAttribute("aria-valuenow",String(H.currentValue)),s.setAttribute("aria-disabled",String(X.value)),!l(u)&&null!=u){let e=Number(u);Number.isNaN(e)&&(e=null),t(z,e)}})),b((()=>{var e;const a=null==(e=G.value)?void 0:e.input;null==a||a.setAttribute("aria-valuenow",`${H.currentValue}`)})),a({focus:()=>{var e,a;null==(a=null==(e=G.value)?void 0:e.focus)||a.call(e)},blur:()=>{var e,a;null==(a=null==(e=G.value)?void 0:e.blur)||a.call(e)}}),(e,a)=>(v(),f("div",{class:I([y(K).b(),y(K).m(y(W)),y(K).is("disabled",y(X)),y(K).is("without-controls",!e.controls),y(K).is("controls-right",y(q))]),onDragstart:a[0]||(a[0]=_((()=>{}),["prevent"]))},[e.controls?N((v(),f("span",{key:0,role:"button","aria-label":y(j)("el.inputNumber.decrease"),class:I([y(K).e("decrease"),y(K).is("disabled",y(Y))]),onKeydown:g(re,["enter"])},[h(y(w),null,{default:x((()=>[y(q)?(v(),V(y(S),{key:0})):(v(),V(y(E),{key:1}))])),_:1})],42,J)),[[y(L),re]]):A("v-if",!0),e.controls?N((v(),f("span",{key:1,role:"button","aria-label":y(j)("el.inputNumber.increase"),class:I([y(K).e("increase"),y(K).is("disabled",y(U))]),onKeydown:g(ne,["enter"])},[h(y(w),null,{default:x((()=>[y(q)?(v(),V(y(F),{key:0})):(v(),V(y(k),{key:1}))])),_:1})],42,Q)),[[y(L),ne]]):A("v-if",!0),h(y(T),{id:e.id,ref_key:"input",ref:G,type:"number",step:e.step,"model-value":y(ee),placeholder:e.placeholder,readonly:e.readonly,disabled:y(X),size:y(W),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[g(_(ne,["prevent"]),["up"]),g(_(re,["prevent"]),["down"])],onBlur:me,onFocus:de,onInput:ie,onChange:oe},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]));export{Z as E,L as v};
